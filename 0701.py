# -*- coding: utf-8 -*-
"""0701.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/12VnmJOSlG_PW8GMFsU0dbY9Oowkeb25V
"""

import streamlit as st
import time

# --- Streamlit UI êµ¬ì„± ---

st.set_page_config(page_title="ì •ì±… íë ˆì´í„° (UI)", page_icon="ğŸ¤–")
st.title("ğŸ¤– ì •ì±… íë ˆì´í„° (UI í”„ë¡œí† íƒ€ì…)")
st.caption("AI ì±—ë´‡ì˜ í”„ëŸ°íŠ¸ì—”ë“œ í™”ë©´ì…ë‹ˆë‹¤. í˜„ì¬ ë°±ì—”ë“œ ë¡œì§ì€ ì—°ê²°ë˜ì–´ ìˆì§€ ì•ŠìŠµë‹ˆë‹¤.")

with st.sidebar:
    st.header("ì•ˆë‚´")
    st.markdown("""
    ì´ ì•±ì€ ì‹¤ì œ AIê°€ ë‹µë³€í•˜ì§€ ì•ŠëŠ” UI í”„ë¡œí† íƒ€ì…ì…ë‹ˆë‹¤.
    ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ì˜ ë””ìì¸ê³¼ íë¦„ì„ í™•ì¸í•˜ê¸° ìœ„í•œ ë²„ì „ì…ë‹ˆë‹¤.

    **ë°°í¬ ì•ˆë‚´:**
    1. ì´ í”„ë¡œì íŠ¸ë¥¼ GitHubì— ì—…ë¡œë“œí•˜ì„¸ìš”.
    2. Streamlit Cloudì— ë°°í¬ ì‹œ, **API í‚¤ë¥¼ ì„¤ì •í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.**
    """)
    st.info("í˜„ì¬ëŠ” ê³ ì •ëœ ë‹µë³€ë§Œ ë°˜í™˜í•©ë‹ˆë‹¤.")

# ì„¸ì…˜ ìƒíƒœë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒ€í™” ê¸°ë¡ ì €ì¥
if "messages" not in st.session_state:
    st.session_state.messages = [
        {"role": "assistant", "content": "ì•ˆë…•í•˜ì„¸ìš”! ì–´ë–¤ ì •ì±…ì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”? (UI í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€)"}
    ]

# ì´ì „ ëŒ€í™” ê¸°ë¡ í‘œì‹œ
for message in st.session_state.messages:
    with st.chat_message(message["role"]):
        st.markdown(message["content"])

# ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬
if prompt := st.chat_input("ì—¬ê¸°ì— ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”..."):
    # ì‚¬ìš©ì ë©”ì‹œì§€ë¥¼ ëŒ€í™” ê¸°ë¡ì— ì¶”ê°€í•˜ê³  í™”ë©´ì— í‘œì‹œ
    st.session_state.messages.append({"role": "user", "content": prompt})
    with st.chat_message("user"):
        st.markdown(prompt)

    # ë´‡ì˜ ë‹µë³€ì„ ì‹œë®¬ë ˆì´ì…˜
    with st.chat_message("assistant"):
        message_placeholder = st.empty()
        # íƒ€ì´í•‘ íš¨ê³¼ë¥¼ ìœ„í•œ ê°„ë‹¨í•œ ì§€ì—°
        time.sleep(0.5)

        # ê³ ì •ëœ ë‹µë³€
        full_response = "í˜„ì¬ëŠ” í”„ëŸ°íŠ¸ì—”ë“œ UIë§Œ êµ¬í˜„ëœ ìƒíƒœì…ë‹ˆë‹¤. ì‹¤ì œ ë‹µë³€ ê¸°ëŠ¥ì€ ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."
        message_placeholder.markdown(full_response)

    # ì‹œë®¬ë ˆì´ì…˜ëœ ë´‡ ë‹µë³€ì„ ëŒ€í™” ê¸°ë¡ì— ì¶”ê°€
    st.session_state.messages.append({"role": "assistant", "content": full_response})